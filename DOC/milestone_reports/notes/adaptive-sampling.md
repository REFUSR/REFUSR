# Adaptive Sampling for Property Testing and Function Fingerprinting

Previous work developed a tester for a fundamental nontrivial property of boolean functions: the junta property. A subset of size _k_ of a function's inputs are said to form a _k_-junta when knowing that subset is sufficient to determine the output of the function for all inputs. Thus, determining this property permits one to restrict the search space for other properties to only those inputs known to influence the output of the function, since inputs outside the junta set can be ignored as they do not influence the function's output at any point in the input space.

The testing of the junta property was a useful starting point for several reasons:
 - First, it provides information about where in the input space the function's output is sensitive to its input, which is useful information for identifying and comparing functions, and for reducing the space of searches associated with these queries;
 - Second, the state of the art algorithm for junta testing we chose for implementation is able to adapt its sampling strategy to both the function under study and the input distribution of interest, which is useful for focusing the search effort in the junta checking itself and in the generation of samples for other queries that may benefit from a bias toward the sensitive samples generated by the junta search;
 - Third, the vector of sensitive input positions is itself a generally informative property that can be used to characterize and distinguish functions without assuming much about them.

To build on work on junta testing to embrace the testing of other properties that might be of value in characterizing and comparing general functions, we both considered testing methodologies for specific properties, and for general property testing. General property testing in terms of adaptive sampling procedures proved to be a useful technique in developing our novel adaptive sample set construction technique for function characterization, which is based on the sensitivity information yielded by the junta tester's search.

The function class of interest is functions in practical use in systems controlled by a microcontroller, where in general many of the input bits will not be semantically meaningful alone but rather will appear as part of the many-bit representation of numbers, such as timers anc counters, typically integers, and perhaps floating point numbers. Thus, the properties developed in terms of the structure of binary functions as such that do not consider these kinds of very specific correlations among input bits in determining the output would be unlikely to provide useful information. two other approaches were the main ones considered. First, a direct implementation of the general purpose function property testing methodology in Chapter 6 of Oded Goldreich, Introduction to Property Testing, 2021; and second, an adaptation of some of the concepts in the aforementioned technique to augment the existing junta tester with the ability to characterize a function based on local rather than global properties, which yields more information and can be implemented in a simpler and more efficient way than the general property tester. The second approach was taken up and implemented.

## Pointwise property testing

In order to take advantage of previous work on junta testing to support the identification of general functions, the notion of a pointwise property test was defined and used to implement a sampling-based approach to property testing at individual input points. A _pointwise property_ is one that can be defined in terms of the behavior of the function under study at single input points. It includes many properties of interest, notably 1-monotonicity.

_k_-monotonicity is defined such that a function _f_ is said to be _k_-monotonic if, given an ordering relation _≤_ on inputs, and the function _f_, for all sequences of inputs x_i, for all i, x_(i-1) ≤ x_i, then f(x_i) ≠ f(x_(i-1)) at most _k_ times. In the case of 1-monotonicity, checking sequences of length 1, that is, perturbations of a single input at a single bit, suffice.

This observation inspired the following approach to function identification by computing fingerprints based on pointwise property behavior at sensitive points.

## Pointwise test-based function fingerprinting

Based on the junta tester's operation in terms of a search for inputs that, when perturbed at a single bit position, yield a change in the output, testing of arbitrary properties at such points was implemented. The junta tester now takes an optional parameter of a predicate to test at all such found points, and returns a log of the result of testing the predicate between the original and perturbed point.

This log is then condensed into an approximately information-preserving fixed dimensional binary vector that serves as a signature of the function's pointwise property behavior, by means of which functions can be compared directly in terms of where in their input spaces the pointwise property under consideration does or does not hold.

### Hyperdimensional Codes

The aforementioned information-preserving fixed dimensional binary vectors are computed according to techniques in Kanerva 2009, _Hyperdimensional Computing_. The vectors of points and the property behavior at those points are hashed and the hash is used to seed a random number generator that is in turn used to generate a random sparse bit vector with fixed dimension and number of set bits. These individual vectors are combined into a vector of the same dimension that preserves information from the individual vectors and represents, in that alternate form, the set or superposition of the information in the individual vectors, which serves as the function fingerprint. Distances between the fixed-dimension fingerprint vectors correlate with distances between the original vectors of unbounded size, permitting efficient distance-based comparison.

Tools to compute and manipulate hyperdimensional codes were added to a supporting library containing tools for working with bitvectors.

### Application to pointwise test-based function fingerprinting

Comparison of functions based on pointwise 1-monotonicity was implemented. In future work, other properties, as well as fingerprinting in terms of the function output itself, may be considered.

